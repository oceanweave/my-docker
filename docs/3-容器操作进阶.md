## 1. 容器 detach（-d 参数）

- [从零开始写 Docker(八)---实现 mydocker run -d 支持后台运行容器 -](https://www.lixueduan.com/posts/docker/mydocker/08-mydocker-run-d/)

1. 容器进程的启动逻辑是  mydocker run --> mydocker init（替换为容器实际的进程），简化为 mydocker 主程序进程 --> 容器进程
2. -d 指的是 detach，目前功能有限，-it 和 -d 参数不能同时使用（-it 指的是前台与容器进程交互，-d 指的是容器进程后台运行）
3. 此处容器后台运行，实际上就是将 mydocker 主程序进程杀死，让容器进程被宿主机 1 号进程纳管
   - 因此有个 bug：容器进程结束后，相应的 overlayfs 目录和 cgroup 等资源无法进行清理
   - 个人理解：此处与 docker 的 -d （容器进程后台运行）有差异，此处 -d 相当于模拟 docker 主进程被杀死后，容器进程被宿主机1号进程纳管